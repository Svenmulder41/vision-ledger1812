services:
  - type: web
    name: vision-ledger-backend
    env: java
    region: singapore
    plan: free
    rootDir: back/ledger
    buildCommand: mvn clean package -DskipTests
    startCommand: java -jar target/ledger-0.0.1-SNAPSHOT.jar
    healthCheckPath: /api/auth/login
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod
      - key: PORT
        value: 8080
      - key: DATABASE_URL
        sync: false
      - key: DATABASE_USERNAME
        sync: false
      - key: DATABASE_PASSWORD
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: JWT_EXPIRATION
        value: 86400000
      - key: ALLOWED_ORIGINS
        sync: false
      - key: DDL_AUTO
        value: validate
      - key: SHOW_SQL
        value: false
      - key: FORMAT_SQL
        value: false
      - key: SECURITY_LOG_LEVEL
        value: WARN
      - key: HIBERNATE_LOG_LEVEL
        value: WARN
      - key: WEB_LOG_LEVEL
        value: WARN

